{"remainingRequest":"E:\\wyt\\git_res\\MeiTuan\\myapp\\node_modules\\babel-loader\\lib\\index.js!E:\\wyt\\git_res\\MeiTuan\\myapp\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\wyt\\git_res\\MeiTuan\\myapp\\src\\store\\product.js","dependencies":[{"path":"E:\\wyt\\git_res\\MeiTuan\\myapp\\src\\store\\product.js","mtime":1601022278730},{"path":"E:\\wyt\\git_res\\MeiTuan\\myapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600696235595},{"path":"E:\\wyt\\git_res\\MeiTuan\\myapp\\node_modules\\babel-loader\\lib\\index.js","mtime":1600696235638},{"path":"E:\\wyt\\git_res\\MeiTuan\\myapp\\node_modules\\eslint-loader\\index.js","mtime":1600696234419}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiRTovd3l0L2dpdF9yZXMvTWVpVHVhbi9teWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgeyBnZXRTdG9yZWxpc3RCeUlkIH0gZnJvbSAnLi4vYXBpL2RldGFpbCc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKdmFyIHByb2R1Y3QgPSB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgcHJvZHVjdExpc3Q6IFtdCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBzZWxlY3RMaXN0OiBmdW5jdGlvbiBzZWxlY3RMaXN0KHN0YXRlKSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgc3RhdGUucHJvZHVjdExpc3QuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgb2JqLmNvbnRlbnQuZm9yRWFjaChmdW5jdGlvbiAocHJvZCkgewogICAgICAgICAgaWYgKHByb2QuY291bnQpIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2gocHJvZCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIHRvdGFsUHJpY2U6IGZ1bmN0aW9uIHRvdGFsUHJpY2Uoc3RhdGUsIGdldHRlcnMpIHsKICAgICAgcmV0dXJuIGdldHRlcnMuc2VsZWN0TGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHByaWNlLCBwcm9kKSB7CiAgICAgICAgcmV0dXJuIHByaWNlICsgcHJvZC5jb3VudCAqIHByb2QucHJpY2U7CiAgICAgIH0sIDApOwogICAgfSwKICAgIHRvdGFsOiBmdW5jdGlvbiB0b3RhbChzdGF0ZSwgZ2V0dGVycykgewogICAgICByZXR1cm4gZ2V0dGVycy5zZWxlY3RMaXN0LnJlZHVjZShmdW5jdGlvbiAodG90YWwsIHByb2QpIHsKICAgICAgICByZXR1cm4gdG90YWwgKyBwcm9kLmNvdW50OwogICAgICB9LCAwKTsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgc2F2ZUxpc3Q6IGZ1bmN0aW9uIHNhdmVMaXN0KHN0YXRlLCBhcnIpIHsKICAgICAgc3RhdGUucHJvZHVjdExpc3QgPSBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKTsKICAgIH0sCiAgICBhZGRDYXJ0OiBmdW5jdGlvbiBhZGRDYXJ0KHN0YXRlLCBfcmVmKSB7CiAgICAgIHZhciB0eXBlID0gX3JlZi50eXBlLAogICAgICAgICAgaW5kZXggPSBfcmVmLmluZGV4OwogICAgICAvLyDliIbnsbsg57Si5byVCiAgICAgIHZhciBwcm9kID0gc3RhdGUucHJvZHVjdExpc3RbdHlwZV0uY29udGVudFtpbmRleF07CiAgICAgIGNvbnNvbGUubG9nKHByb2QpOwoKICAgICAgaWYgKHByb2QuY291bnQpIHsKICAgICAgICBWdWUuc2V0KHByb2QsICdjb3VudCcsIHByb2QuY291bnQgKyAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBWdWUuc2V0KHByb2QsICdjb3VudCcsIDEpOwogICAgICB9CiAgICB9LAogICAgcmVkdWNlQ2FydDogZnVuY3Rpb24gcmVkdWNlQ2FydChzdGF0ZSwgX3JlZjIpIHsKICAgICAgdmFyIHR5cGUgPSBfcmVmMi50eXBlLAogICAgICAgICAgaW5kZXggPSBfcmVmMi5pbmRleDsKICAgICAgdmFyIGxpc3QgPSBzdGF0ZS5wcm9kdWN0TGlzdFt0eXBlXS5jb250ZW50W2luZGV4XTsKCiAgICAgIGlmIChsaXN0LmNvdW50KSB7CiAgICAgICAgVnVlLnNldChsaXN0LCAnY291bnQnLCBsaXN0LmNvdW50IC0gMSk7CiAgICAgIH0KICAgIH0sCiAgICBDbGVhckNhcnQ6IGZ1bmN0aW9uIENsZWFyQ2FydChzdGF0ZSkgewogICAgICBzdGF0ZS5wcm9kdWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5jb250ZW50LmZvckVhY2goZnVuY3Rpb24gKHByb2QpIHsKICAgICAgICAgIGlmIChwcm9kLmNvdW50KSB7CiAgICAgICAgICAgIHByb2QuY291bnQgPSAwOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8v6K+35rGC5YiX6KGoCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KF9yZWYzLCBpZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBnZXRTdG9yZWxpc3RCeUlkKHsKICAgICAgICAgIGlkOiBpZAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgbGlzdCA9IHJlc3BvbnNlLmRhdGEuZ29vZHM7CiAgICAgICAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIHR5cGUpIHsKICAgICAgICAgICAgaXRlbS5jb250ZW50LmZvckVhY2goZnVuY3Rpb24gKHByb2QsIGluZGV4KSB7CiAgICAgICAgICAgICAgcHJvZC50eXBlID0gdHlwZTsKICAgICAgICAgICAgICBwcm9kLmluZGV4ID0gaW5kZXg7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBjb21taXQoJ3NhdmVMaXN0JywgbGlzdCk7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW9kdWxlczoge30KfTsKZXhwb3J0IGRlZmF1bHQgcHJvZHVjdDs="},{"version":3,"sources":["E:/wyt/git_res/MeiTuan/myapp/src/store/product.js"],"names":["getStorelistById","Vue","product","namespaced","state","productList","getters","selectList","result","forEach","obj","content","prod","count","push","totalPrice","reduce","price","total","mutations","saveList","arr","addCart","type","index","console","log","set","reduceCart","list","ClearCart","item","actions","getList","id","commit","Promise","resolve","then","response","data","goods","modules"],"mappings":"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","sourcesContent":["import {getStorelistById} from '../api/detail'\r\nimport Vue  from 'vue'\r\nconst product = {\r\n    namespaced:true,\r\n    state: {\r\n        productList:[],\r\n    },\r\n    getters:{\r\n        selectList(state){\r\n            let result = [];\r\n            state.productList.forEach(obj => {\r\n                obj.content.forEach(prod=>{\r\n                    if(prod.count){\r\n                        result.push(prod);\r\n                    }\r\n                })\r\n            });\r\n            return result\r\n        },\r\n        totalPrice(state,getters){\r\n            return getters.selectList.reduce((price,prod)=>{\r\n                return price + prod.count*prod.price;\r\n            },0)\r\n        },\r\n        total(state,getters){\r\n            return getters.selectList.reduce((total,prod)=>{\r\n                return total + prod.count;\r\n            },0)\r\n        },\r\n    },\r\n    mutations: {\r\n        saveList(state,arr){\r\n            state.productList = [...arr];\r\n\r\n        },\r\n        addCart(state,{type,index}){\r\n            // 分类 索引\r\n            let prod = state.productList[type].content[index];\r\n            console.log(prod)\r\n            if(prod.count){\r\n                Vue.set(prod,'count',prod.count+1);\r\n            }else{\r\n                Vue.set(prod,'count',1);\r\n            }\r\n        },\r\n        reduceCart(state,{type,index}){\r\n            let list = state.productList[type].content[index];\r\n            if(list.count){\r\n                Vue.set(list,'count',list.count-1)\r\n            }\r\n        },\r\n        ClearCart(state){\r\n            state.productList.forEach((item)=>{\r\n                item.content.forEach((prod)=>{\r\n                    if(prod.count){\r\n                        prod.count = 0;\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    },\r\n    actions: {\r\n    //请求列表\r\n        getList({commit},id){\r\n            return new Promise(resolve=>{\r\n                getStorelistById({id}).then(response=>{\r\n                    let list = response.data.goods;\r\n                    list.forEach((item,type)=>{\r\n                        item.content.forEach((prod,index)=>{\r\n                            prod.type = type;\r\n                            prod.index = index;\r\n                        })\r\n                    })\r\n                    commit('saveList',list);\r\n                    resolve();\r\n                })\r\n            })\r\n           \r\n        }\r\n    },\r\n    modules: {\r\n    }\r\n\r\n}\r\n\r\nexport default product;"]}]}